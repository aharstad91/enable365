/**
 * Editor-only Tailwind CSS
 *
 * This file is compiled separately with a scoped config (tailwind.config.editor.js)
 * that adds `.acf-block-preview` as the `important` selector.
 *
 * Only utilities are included to minimize CSS size and avoid conflicts
 * with WordPress admin UI styles.
 */

@tailwind components;
@tailwind utilities;

/* E365 Block components for editor preview */
/* Note: Editor always shows horizontal layout (no breakpoints) since editor area is narrow */
@layer components {
  /* E365 Grid - flex layout on the ACF innerblocks container */
  .e365-grid > .acf-innerblocks-container {
    @apply flex flex-wrap flex-row gap-4 items-start;
  }

  /* Gap variations */
  .e365-grid[data-gap="none"] > .acf-innerblocks-container { @apply gap-0; }
  .e365-grid[data-gap="sm"] > .acf-innerblocks-container { @apply gap-2; }
  .e365-grid[data-gap="md"] > .acf-innerblocks-container { @apply gap-4; }
  .e365-grid[data-gap="lg"] > .acf-innerblocks-container { @apply gap-6; }
  .e365-grid[data-gap="xl"] > .acf-innerblocks-container { @apply gap-8; }

  /* Vertical alignment */
  .e365-grid[data-valign="top"] > .acf-innerblocks-container { @apply items-start; }
  .e365-grid[data-valign="center"] > .acf-innerblocks-container { @apply items-center; }
  .e365-grid[data-valign="bottom"] > .acf-innerblocks-container { @apply items-end; }
  .e365-grid[data-valign="stretch"] > .acf-innerblocks-container { @apply items-stretch; }

  /* E365 Column - remove ACF wrapper from layout */
  .e365-column > .acf-innerblocks-container {
    @apply contents;
  }

  /* 2-column layouts - use flex-1 for equal widths (50/50) */
  .e365-grid[data-columns="2"] > .acf-innerblocks-container > .e365-column {
    @apply flex-1;
    min-width: 0; /* Allow flex items to shrink below content size */
  }

  /* 2-column ratio variations */
  .e365-grid[data-columns="2"][data-ratio="60-40"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply w-3/5 flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="60-40"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply w-2/5 flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="40-60"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply w-2/5 flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="40-60"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply w-3/5 flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="66-33"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply w-2/3 flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="66-33"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply w-1/3 flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="33-66"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply w-1/3 flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="33-66"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply w-2/3 flex-none;
  }

  /* 70-30 ratio */
  .e365-grid[data-columns="2"][data-ratio="70-30"] > .acf-innerblocks-container > .e365-column:first-child {
    flex: 7 0 0%;
  }
  .e365-grid[data-columns="2"][data-ratio="70-30"] > .acf-innerblocks-container > .e365-column:last-child {
    flex: 3 0 0%;
  }

  /* 30-70 ratio */
  .e365-grid[data-columns="2"][data-ratio="30-70"] > .acf-innerblocks-container > .e365-column:first-child {
    flex: 3 0 0%;
  }
  .e365-grid[data-columns="2"][data-ratio="30-70"] > .acf-innerblocks-container > .e365-column:last-child {
    flex: 7 0 0%;
  }

  /* 3-column layouts */
  .e365-grid[data-columns="3"] > .acf-innerblocks-container > .e365-column {
    @apply flex-1;
    min-width: 0;
  }

  /* 4-column layouts */
  .e365-grid[data-columns="4"] > .acf-innerblocks-container > .e365-column {
    @apply flex-1;
    min-width: 0;
  }

  /* E365 Testimonial - quote marks styling */
  .e365-testimonial__quote-text {
    @apply relative;
  }
  .e365-testimonial__quote-text::before {
    content: '\201C';
    @apply absolute -left-2 -top-2 text-4xl lg:text-5xl text-slate-300 font-serif leading-none;
  }
  /* Removed ::after - single opening quote mark is cleaner design */

  /* Dark/brand backgrounds get lighter quote marks */
  .e365-testimonial.bg-slate-900 .e365-testimonial__quote-text::before,
  .e365-testimonial.bg-\[\#AA1010\] .e365-testimonial__quote-text::before {
    @apply text-white/20;
  }

  /* Quote content styling */
  .e365-testimonial__quote p {
    @apply m-0;
  }
  .e365-testimonial__quote p + p {
    @apply mt-4;
  }

  /* E365 Video - image establishes height, play button overlays */
  .e365-video__wrapper {
    @apply relative;
    isolation: isolate;
  }
  .e365-video__wrapper > img {
    @apply w-full h-auto block;
  }
  .e365-video__wrapper .e365-video__play {
    @apply absolute inset-0;
    z-index: 10;
    background: transparent;
  }
}
