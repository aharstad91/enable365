/**
 * Editor-only Tailwind CSS
 *
 * This file is compiled separately with a scoped config (tailwind.config.editor.js)
 * that adds `.acf-block-preview` as the `important` selector.
 *
 * Only utilities are included to minimize CSS size and avoid conflicts
 * with WordPress admin UI styles.
 */

@tailwind components;
@tailwind utilities;

/* E365 Block components for editor preview */
/* Note: Editor uses md: breakpoint (768px) instead of lg: (1024px) because editor area is narrower */
@layer components {
  /* E365 Grid - flex layout on the ACF innerblocks container */
  .e365-grid > .acf-innerblocks-container {
    @apply flex flex-wrap;
    @apply flex-col md:flex-row;
    @apply gap-4 md:gap-6;
    @apply items-start;
  }

  /* Gap variations */
  .e365-grid[data-gap="none"] > .acf-innerblocks-container { @apply gap-0; }
  .e365-grid[data-gap="sm"] > .acf-innerblocks-container { @apply gap-2 md:gap-4; }
  .e365-grid[data-gap="md"] > .acf-innerblocks-container { @apply gap-4 md:gap-6; }
  .e365-grid[data-gap="lg"] > .acf-innerblocks-container { @apply gap-6 md:gap-8; }
  .e365-grid[data-gap="xl"] > .acf-innerblocks-container { @apply gap-8 md:gap-12; }

  /* Vertical alignment */
  .e365-grid[data-valign="top"] > .acf-innerblocks-container { @apply items-start; }
  .e365-grid[data-valign="center"] > .acf-innerblocks-container { @apply items-center; }
  .e365-grid[data-valign="bottom"] > .acf-innerblocks-container { @apply items-end; }
  .e365-grid[data-valign="stretch"] > .acf-innerblocks-container { @apply items-stretch; }

  /* E365 Column - remove ACF wrapper from layout */
  .e365-column > .acf-innerblocks-container {
    @apply contents;
  }

  /* E365 Column widths - based on parent grid's data attributes */
  /* All columns are full width on mobile, side-by-side at md: breakpoint in editor */
  .e365-grid > .acf-innerblocks-container > .e365-column {
    @apply w-full;
  }

  /* 2-column layouts - use flex-1 for equal widths with gap support */
  .e365-grid[data-columns="2"] > .acf-innerblocks-container > .e365-column {
    @apply md:flex-1;
  }

  /* 2-column ratio variations */
  .e365-grid[data-columns="2"][data-ratio="60-40"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply md:w-3/5 md:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="60-40"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply md:w-2/5 md:flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="40-60"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply md:w-2/5 md:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="40-60"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply md:w-3/5 md:flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="66-33"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply md:w-2/3 md:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="66-33"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply md:w-1/3 md:flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="33-66"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply md:w-1/3 md:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="33-66"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply md:w-2/3 md:flex-none;
  }

  /* 70-30 ratio */
  .e365-grid[data-columns="2"][data-ratio="70-30"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply md:flex-[7] md:flex-grow-0 md:flex-shrink-0;
    flex-basis: 70%;
  }
  .e365-grid[data-columns="2"][data-ratio="70-30"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply md:flex-[3] md:flex-grow-0 md:flex-shrink-0;
    flex-basis: 30%;
  }

  /* 30-70 ratio */
  .e365-grid[data-columns="2"][data-ratio="30-70"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply md:flex-[3] md:flex-grow-0 md:flex-shrink-0;
    flex-basis: 30%;
  }
  .e365-grid[data-columns="2"][data-ratio="30-70"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply md:flex-[7] md:flex-grow-0 md:flex-shrink-0;
    flex-basis: 70%;
  }

  /* 3-column layouts - use flex-1 for equal widths with gap support */
  .e365-grid[data-columns="3"] > .acf-innerblocks-container > .e365-column {
    @apply md:flex-1;
  }

  /* 4-column layouts - use flex-1 for equal widths with gap support */
  .e365-grid[data-columns="4"] > .acf-innerblocks-container > .e365-column {
    @apply md:flex-1;
  }

  /* Reverse order on mobile for 2-column layouts */
  .e365-grid[data-columns="2"][data-reverse="true"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply order-2 md:order-1;
  }
  .e365-grid[data-columns="2"][data-reverse="true"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply order-1 md:order-2;
  }

  /* E365 Testimonial - quote marks styling */
  .e365-testimonial__quote-text {
    @apply relative;
  }
  .e365-testimonial__quote-text::before {
    content: '\201C';
    @apply absolute -left-2 -top-2 text-4xl lg:text-5xl text-slate-300 font-serif leading-none;
  }
  /* Removed ::after - single opening quote mark is cleaner design */

  /* Dark/brand backgrounds get lighter quote marks */
  .e365-testimonial.bg-slate-900 .e365-testimonial__quote-text::before,
  .e365-testimonial.bg-\[\#AA1010\] .e365-testimonial__quote-text::before {
    @apply text-white/20;
  }

  /* Quote content styling */
  .e365-testimonial__quote p {
    @apply m-0;
  }
  .e365-testimonial__quote p + p {
    @apply mt-4;
  }
}
