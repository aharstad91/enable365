@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom WordPress compatibility layer */
@layer base {
  /* Preserve heading styles from Tailwind reset */
  h1, h2, h3, h4, h5, h6 {
    font-size: revert;
    font-weight: revert;
    margin: revert;
    line-height: revert;
  }

  /* Reset any conflicting WordPress styles that Tailwind might override */
  .alignnone,
  .alignleft,
  .alignright,
  .aligncenter,
  .wp-caption {
    @apply max-w-full;
  }

  /* WordPress image size classes */
  .size-thumbnail,
  .size-medium,
  .size-large,
  .size-full {
    width: auto !important;
    max-width: 100%;
    height: auto;
  }
}

/* Add any custom components here */
@layer components {
  /* E365 Grid - flex layout on the ACF innerblocks container */
  .e365-grid > .acf-innerblocks-container {
    @apply flex flex-wrap;
    @apply flex-col lg:flex-row;
    @apply gap-6 lg:gap-8;
    @apply items-start;
  }

  /* Gap variations */
  .e365-grid[data-gap="none"] > .acf-innerblocks-container { @apply gap-0; }
  .e365-grid[data-gap="sm"] > .acf-innerblocks-container { @apply gap-4 lg:gap-6; }
  .e365-grid[data-gap="md"] > .acf-innerblocks-container { @apply gap-6 lg:gap-8; }
  .e365-grid[data-gap="lg"] > .acf-innerblocks-container { @apply gap-8 lg:gap-12; }
  .e365-grid[data-gap="xl"] > .acf-innerblocks-container { @apply gap-12 lg:gap-16; }

  /* Vertical alignment */
  .e365-grid[data-valign="top"] > .acf-innerblocks-container { @apply items-start; }
  .e365-grid[data-valign="center"] > .acf-innerblocks-container { @apply items-center; }
  .e365-grid[data-valign="bottom"] > .acf-innerblocks-container { @apply items-end; }
  .e365-grid[data-valign="stretch"] > .acf-innerblocks-container { @apply items-stretch; }

  /* E365 Column - remove ACF wrapper from layout */
  .e365-column > .acf-innerblocks-container {
    @apply contents;
  }

  /* E365 Column widths - based on parent grid's data attributes */
  /* All columns are full width on mobile */
  .e365-grid > .acf-innerblocks-container > .e365-column {
    @apply w-full;
  }

  /* 2-column layouts - use flex-1 for equal widths with gap support */
  .e365-grid[data-columns="2"] > .acf-innerblocks-container > .e365-column {
    @apply lg:flex-1;
  }

  /* 2-column ratio variations */
  .e365-grid[data-columns="2"][data-ratio="60-40"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply lg:w-3/5 lg:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="60-40"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply lg:w-2/5 lg:flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="40-60"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply lg:w-2/5 lg:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="40-60"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply lg:w-3/5 lg:flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="66-33"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply lg:w-2/3 lg:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="66-33"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply lg:w-1/3 lg:flex-none;
  }

  .e365-grid[data-columns="2"][data-ratio="33-66"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply lg:w-1/3 lg:flex-none;
  }
  .e365-grid[data-columns="2"][data-ratio="33-66"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply lg:w-2/3 lg:flex-none;
  }

  /* 70-30 ratio */
  .e365-grid[data-columns="2"][data-ratio="70-30"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply lg:flex-[7] lg:flex-grow-0 lg:flex-shrink-0;
    flex-basis: 70%;
  }
  .e365-grid[data-columns="2"][data-ratio="70-30"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply lg:flex-[3] lg:flex-grow-0 lg:flex-shrink-0;
    flex-basis: 30%;
  }

  /* 30-70 ratio */
  .e365-grid[data-columns="2"][data-ratio="30-70"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply lg:flex-[3] lg:flex-grow-0 lg:flex-shrink-0;
    flex-basis: 30%;
  }
  .e365-grid[data-columns="2"][data-ratio="30-70"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply lg:flex-[7] lg:flex-grow-0 lg:flex-shrink-0;
    flex-basis: 70%;
  }

  /* 3-column layouts - use flex-1 for equal widths with gap support */
  .e365-grid[data-columns="3"] > .acf-innerblocks-container > .e365-column {
    @apply lg:flex-1;
  }

  /* 4-column layouts - use flex-1 for equal widths with gap support */
  .e365-grid[data-columns="4"] > .acf-innerblocks-container > .e365-column {
    @apply lg:flex-1;
  }

  /* Reverse order on mobile for 2-column layouts */
  .e365-grid[data-columns="2"][data-reverse="true"] > .acf-innerblocks-container > .e365-column:first-child {
    @apply order-2 lg:order-1;
  }
  .e365-grid[data-columns="2"][data-reverse="true"] > .acf-innerblocks-container > .e365-column:last-child {
    @apply order-1 lg:order-2;
  }

  /* E365 Testimonial - quote marks styling */
  .e365-testimonial__quote-text {
    @apply relative;
  }
  .e365-testimonial__quote-text::before {
    content: '\201C';
    @apply absolute -left-2 -top-2 text-4xl lg:text-5xl text-slate-300 font-serif leading-none;
  }
  /* Removed ::after - single opening quote mark is cleaner design */

  /* Dark/brand backgrounds get lighter quote marks */
  .e365-testimonial.bg-slate-900 .e365-testimonial__quote-text::before,
  .e365-testimonial.bg-\[\#AA1010\] .e365-testimonial__quote-text::before {
    @apply text-white/20;
  }

  /* Quote content styling */
  .e365-testimonial__quote p {
    @apply m-0;
  }
  .e365-testimonial__quote p + p {
    @apply mt-4;
  }

  /* E365 Video - image establishes height, play button overlays */
  .e365-video__wrapper {
    position: relative;
    isolation: isolate;
  }
  .e365-video__wrapper > img {
    width: 100%;
    height: auto;
    display: block;
  }
  .e365-video__wrapper .e365-video__play {
    position: absolute;
    inset: 0;
    z-index: 10;
    background: transparent;
  }
  /* Play icon button styling */
  .e365-video__play-icon {
    width: 72px;
    height: 72px;
    background-color: #AA1010;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, background-color 0.2s ease;
  }
  .e365-video__wrapper:hover .e365-video__play-icon {
    transform: scale(1.1);
    background-color: #900101;
  }

  /* E365 Media + Content - InnerBlocks container handling */
  .e365-media-content__content > .acf-innerblocks-container {
    @apply contents;
  }

  /* Style for content area - make text flow nicely */
  .e365-media-content__content h1,
  .e365-media-content__content h2,
  .e365-media-content__content h3,
  .e365-media-content__content h4 {
    @apply mt-0;
  }
  .e365-media-content__content h1:first-child,
  .e365-media-content__content h2:first-child,
  .e365-media-content__content h3:first-child,
  .e365-media-content__content h4:first-child {
    @apply mt-0;
  }
  .e365-media-content__content p:last-child {
    @apply mb-0;
  }

  /* Video wrapper in media-content */
  .e365-media-content__video-wrapper {
    @apply aspect-video;
  }

  /* E365 Buttons - responsive button component */
  .e365-btn {
    @apply inline-flex items-center justify-center;
    @apply font-semibold rounded-lg;
    @apply transition-all duration-200;
    @apply no-underline cursor-pointer border-2;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#AA1010];
  }

  /* Button icon spacing */
  .e365-btn__icon {
    @apply flex-shrink-0;
  }
  .e365-btn__icon svg {
    @apply w-4 h-4;
  }
}

/* Add any custom utilities here */
@layer utilities {
  /* Your custom utility classes go here */
}

/* E365 Video Block - outside @layer to ensure compilation */
.e365-video__wrapper {
  position: relative;
  isolation: isolate;
}
.e365-video__wrapper > img {
  width: 100%;
  height: auto;
  display: block;
}
.e365-video__wrapper .e365-video__play {
  position: absolute;
  inset: 0;
  z-index: 10;
  background: transparent;
}
